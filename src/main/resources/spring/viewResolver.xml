<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
	http://www.springframework.org/schema/beans/spring-beans.xsd">
    <!--视图解析 -->
	<!--1、BeanNameViewResolver视图解析器 根据controller类的方法返回的String
	 类型的viewName  作为bean的name从spring中获取 View对象调用其的render()方法 -->
	<bean class="org.springframework.web.servlet.view.BeanNameViewResolver">
	</bean>

    <!--配置view对象-->
    <bean id="helloView" class="com.xiu.config.HelloView"/>

	<!--2、ContentNegotiatingViewResolver视图解析器
	    根据http请求头中的context_type(media)来获取最符合的视图进行数据渲染
	    该解析器可以将相同的数据以不同的形式展示出来（xml,json，jsp）
	    三种方式
	    1、使用扩展名
	    http://www.test.com/user.xml    呈现xml文件
        http://www.test.com/user.json    呈现json格式
        http://www.test.com/user       使用默认view呈现，比如jsp等
        2、使用http request header的Accept
        GET /user HTTP/1.1
        Accept:application/xml
        GET /user HTTP/1.1
        Accept:application/json
        3、使用请求参数区分
        http://www.test.com/user?format=xml
        http://www.test.com/user?format=json
	 -->

	<bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver" >
		<property name="order" value="0" />
		<!--spring5.0以后 使用contentNegotiationManagerFactoryBean 进行详细的配置-->
 		<property name="contentNegotiationManager"  ref="contentNegotiationManagerFactoryBean"/>
        <!-- 设置默认的视图对象，ContentNegotiatingViewResolver 根据类型匹配view的时候有两种形式
           1、使用视图解析器viewResolvers 来获取对用的view对象
           2、defaultViews 列出所有的view对象
        -->
		<property name="defaultViews">
			<list>
				<bean class="org.springframework.web.servlet.view.json.MappingJackson2JsonView"></bean>
				<bean class="org.springframework.web.servlet.view.xml.MarshallingView">
					<constructor-arg>
						<bean class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
							<property name="marshallerProperties">
								<map>
									<entry key="jaxb.encoding" value="UTF-8"></entry>
<!--									&lt;!&ndash; 放置xml自动缩进属性 &ndash;&gt;-->
<!--									<entry key="jaxb.formatted.output" value="true"></entry>-->
								</map>
							</property>
							<property name="packagesToScan" value="com.xiu.entity"/>
						</bean>
					</constructor-arg>
				</bean>
			</list>
		</property>
	</bean>

	<!--具体启用上面的哪些方式由该bean来决定 -->
	<bean id="contentNegotiationManagerFactoryBean" class="org.springframework.web.accept.ContentNegotiationManagerFactoryBean" >
		<!--是否启用参数支持 默认为true 表明可以使用方式三-->
		<property name="favorParameter" value="true" />
		<!--是否忽略 request的header的accept true忽略 无法使用方式二-->
		<property name="ignoreAcceptHeader" value="false" />

		<property name="mediaTypes">
			<map>
                <entry key="html" value="text/html" />
				<entry key="json" value="application/json" />
				<entry key="xml" value="application/xml"/>                     </map>
		</property>

	</bean>

	<!--配置jsp相关的视图解析器-->
<!--	<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">-->
<!--	<property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />-->
<!--	<property name="prefix" value="/WEB-INF/jsp/" />-->
<!--	<property name="suffix" value=".jsp" />-->
<!--	</bean>-->

	<!--配置处理器json相关的视图解析器-->
	<bean id="jsonView" class="org.springframework.web.servlet.view.json.MappingJackson2JsonView"/>


</beans>